# 2.7 异常

异常，如果你学过编程就应该知道是什么，这里不赘述了。

Aoi 中，如果类型 `T` 实现了 `Exception[T]`，那么它能作为异常抛出。

## throw 表达式

`throw` 是一个类型为 `never` 的表达式。用 `throw exception` 抛出一个异常。

## try 语句

`try` 语句用于处理满足特定条件的异常。它的语法如下：

```aoi
try
    statement
catch pattern0 then
    statement0
catch pattern1 then
    statement1
...
finally
    statementFinally
```

其中，`statement` 是语句，`pattern` 是匹配模式。在执行 `statement` 时，如果遇到异常，则尝试在 `catch` 中捕获，若异常通过模式匹配，则进入该 `catch` 分支，并可以使用匹配模式中声明的变量。若异常没有被捕获，则继续传递。无论如何，`finally` 分支都会被执行。

例如：

```aoi
try {
    let a = array[42];
    printLine a;
} catch IndexOutOfRangeException as e then {
    printLine e;
}
```

## `try` 表达式

`try` 表达式语法和 `try` 语句相似，但是没有 `finally` 分支：

```aoi
try expression catch pattern0 then expression0 catch pattern1 then expression1 ...
```

在求值 `statement` 时，如果遇到异常，则尝试在 `catch` 中捕获，若异常通过模式匹配，则进入该 `catch` 分支，表达式结果为 `catch` 分支的表达式的结果。若异常没有被捕获，则继续传递。

例如：

```aoi
let a = try array[42] catch IndexOutOfRangeException then 0;
```
