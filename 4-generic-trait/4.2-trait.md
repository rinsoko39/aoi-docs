# 4.2 特征

特征是 Aoi 中独创的概念，它和 Rust 中的特征，许多面向对象语言的接口有相同的功能，但也和这些概念有较大的差异。

和名字一样，特征接收若干类型参数，并描述这些类型的特征。具体地说，特征描述了若干个关于这些类型的运算符。它类似于代数中的代数结构，泛型类型对应代数结构中的元素集合，而定义的运算对应代数结构中的运算。

定义一个特征的语法如下：

```aoi
trait TraitName[T0, T1, ...] {
    ...
}
```

其中，`TraitName` 是特征名，`T` 是类型参数，大括号中可以为若干一般运算符、类型转换运算符、getter 和 setter 的声明，但是这些声明可以不提供主体块，而是以 `;` 代替。若提供了主体块，则它将作为表达式的默认实现。默认实现中，可以使用接口中声明的其它运算符。在实现时，也可以重写表达式的默认实现。

例如，以下特征不太严谨地描述了一个代数中的线性空间中，它要求标量和向量之间的数乘：

```aoi
trait VectorSpace[TNum, TVec] {
    op a * u: TNum <> TVec -> TVec;
}
```

（当然，一个线性空间还需要满足数域中的四则运算和向量的加减法，也就是要求 `TNum` 和 `TVec` 具有额外的特征。这将在后文中展开。）

特征也能像其它语言中的特征或接口一样描述一个类型的方法。例如，以下特征描述了一个迭代器：

```aoi
trait Iter[T, TVal] {
    op iterate iterator: T -> TVal?;
}
```

正如其它语言的方法之于 Aoi 的运算符，其它语言的特征或接口之于 Aoi 的特征也是一样：Aoi 的特征并不是「需要某个类型的特定方法」，而是单纯地需要提供若干关于这些类的运算符。这种设计同样是接近本质的，因为虚表本质上存储的就是若干函数指针。并且对于如上述描述线性空间这样的情况，Aoi 的特征描述起来更为自然。
