# 1.6 可空类型

类型名后加 `?` 表示一个可空类型，例如，`int?` 表示一个可空的 `int` 类型。

可空类型形式上是一个联合体，有 `some` 和 `none` 两种情况。`some` 情况表示有一个值，`none` 则表示没有值。例如，`some 42` 和 `none ()` 都可以表示一个 `int?`。

以下是关于可空类型的语法糖。懒得做详细说明了，应当能分辨下文中哪些地方是可空类型，哪些地方是可空类型对应的非空类型。

## `??`

`a ?? b` 表示若 `a` 为空，则为 `b`，否则为 `a`。`??` 短路，若 `a` 非空，则不对 `b` 求值。

## `??=`

`a ??= b` 表示若 `a` 为空，则将其赋值为 `b`。`??=` 同样短路，若 `a` 非空，则不对 `b` 求值，也不发生赋值。该表达式的值为右侧的值。

## `?.`

`a?.b` 或 `a?.[b]` 表示若 `a` 为空，则为空，否则为字段或属性访问的结果。当作为左值时，若 `a` 为空，则不发生赋值。

## `?`

对于 `a op b` 和 `op a`，在 `a` `op` `b` 中任意一处后加 `?` 表示若该值为空，则整个运算结果为空，否则为去空后的结果。

## `!`

`a!` 保证 `a` 非空。若 `a` 为空，则会抛出异常。
